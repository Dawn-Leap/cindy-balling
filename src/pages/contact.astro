---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Contact">
    <section id="contact">
        <div class="container my-5">
            <div class="row">
                <div class="col-lg-6 col-xl-7 col-xxl-8">
                    <h1>Contact Me</h1>
                    <form
                        id="contact-form"
                        name="contact-form"
                        method="POST"
                        data-netlify="true"
                        action="/thank-you"
                    >
                        <input
                            type="hidden"
                            name="form-name"
                            value="contact-form"
                        />
                        <div class="form-group">
                            <label for="name" hidden>Name:</label>
                            <input
                                type="text"
                                class="form-control"
                                id="name"
                                name="name"
                                placeholder="Name*"
                                required
                            />
                            <label for="email" hidden>Email:</label>
                            <input
                                type="email"
                                class="form-control"
                                id="email"
                                name="email"
                                placeholder="Email*"
                                required
                            />
                        </div>
                        <div class="form-group">
                            <label for="message" hidden>Message:</label>
                            <textarea
                                class="form-control"
                                id="message"
                                name="message"
                                rows="8"
                                placeholder="Message"
                                required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary"
                            >Submit</button
                        >
                    </form>
                    <div id="thank-you-contact" style="display:none;">
                        <p>
                            Thank you for contacting me! I will get back to you
                            shortly.
                        </p>
                    </div>
                    <script>
                        document
                            .getElementById("contact-form")
                            ?.addEventListener("submit", function (event) {
                                console.log("completed");
                                event.preventDefault();
                                const form =
                                    event.target as HTMLFormElement | null;
                                const thankYouMessage = document.getElementById(
                                    "thank-you-contact"
                                ) as HTMLElement | null;

                                if (!form || !thankYouMessage) {
                                    return;
                                }

                                fetch("/", {
                                    method: "POST",
                                    headers: {
                                        "Content-Type":
                                            "application/x-www-form-urlencoded",
                                    },
                                    body: new URLSearchParams(
                                        new FormData(form) as unknown as Record<
                                            string,
                                            string
                                        >
                                    ).toString(),
                                })
                                    .then(() => {
                                        form.style.display = "none";
                                        thankYouMessage.style.display = "block";
                                    })
                                    .catch((error) =>
                                        alert(
                                            "There was an error submitting the form: " +
                                                error
                                        )
                                    );
                            });
                    </script>
                </div>
                <div class="col-lg-1 horizontal-divider">
                    <hr class="d-lg-none" />
                    <div class="line d-none d-lg-block"></div>
                </div>
                <div class="col-lg-5 col-xl-4 col-xxl-3">
                    <h2>Contact Information</h2>
                    <ul class="contact-info">
                        <li class="phone">(435) 535-1020</li>
                        <li class="email">info@cindyballing.com</li>
                        <!-- <li class="address">
                            1525 Mariposa Dr #900, Mesquite, TX 75150
                        </li> -->
                    </ul>
                </div>
            </div>
        </div>
    </section>
</Layout>
